var Point=function(){function n(n,t){this.X=n;this.Y=t}return n}(),__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},Box=function(n){function t(t,i,r,u){var f=n.call(this,t,i)||this;return f.Width=r,f.Height=u,f}return __extends(t,n),t}(Point),BoundedNumber=function(){function n(n,t,i){this.Start=n;this.Finish=t;this._value=i}return Object.defineProperty(n.prototype,"Value",{get:function(){return this._value},set:function(n){this._value=this.Start<this.Finish?n<this.Start?this.Start:n>this.Finish?this.Finish:n:n>this.Start?this.Start:n<this.Finish?this.Finish:n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Percentage",{get:function(){return this.Start<this.Finish?(this.Value-this.Start)/this.BoundDistance:(this.Start-this.Value)/this.BoundDistance},set:function(n){this.Value=this.Start<this.Finish?this.Start+this.BoundDistance*n:this.Start-this.BoundDistance*n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"BoundDistance",{get:function(){return Math.max(this.Finish,this.Start)-Math.min(this.Finish,this.Start)},enumerable:!0,configurable:!0}),n}(),__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},BoundedBox=function(n){function t(t,i,r,u,f){var e=n.call(this,t,i)||this;return e._width=new BoundedNumber(r*f,r,r),e._height=new BoundedNumber(u*f,u,u),e}return __extends(t,n),t.WithAspectRatio=function(n,i,r,u,f,e){var o,s,h,c;return u>r?(h=r/u,o=f*h,s=f):(c=u/r,o=f,s=f*c),new t(n,i,o,s,e)},Object.defineProperty(t.prototype,"Width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Percentage",{get:function(){return this.Width.Percentage},set:function(n){this.Width.Percentage=n;this.Height.Percentage=n},enumerable:!0,configurable:!0}),t}(Point),__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},ImageBox=function(n){function t(t,i,r){var u=n.call(this,i,r,t.width,t.height)||this;return u.Img=t,u}return __extends(t,n),t}(Box),BoundedPoint=function(){function n(n,t){this.Start=n;this.Finish=t;this._value=new Point(0,0);this.Percentage=0}return Object.defineProperty(n.prototype,"Value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Percentage",{set:function(n){this._value.X=this.Start.X<this.Finish.X?this.Start.X+this.BoundDistanceX*n:this.Start.X-this.BoundDistanceX*n;this._value.Y=this.Start.Y<this.Finish.Y?this.Start.Y+this.BoundDistanceY*n:this.Start.Y-this.BoundDistanceY*n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"BoundDistanceX",{get:function(){return Math.max(this.Finish.X,this.Start.X)-Math.min(this.Finish.X,this.Start.X)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"BoundDistanceY",{get:function(){return Math.max(this.Finish.Y,this.Start.Y)-Math.min(this.Finish.Y,this.Start.Y)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Direction",{get:function(){return this.Start.X<this.Finish.X?Direction.Right:this.Start.X>this.Finish.X?Direction.Left:Direction.None},enumerable:!0,configurable:!0}),n}(),Direction,Swimmer;(function(n){n[n.Left=0]="Left";n[n.Right=1]="Right";n[n.None=2]="None"})(Direction||(Direction={}));Swimmer=function(){function n(n,t,i){this.img=n;this.ctx=t;this.Layout=i;this._updateTime=new BoundedNumber(0,0,0);this._updateZ=new BoundedNumber(0,0,0);this._rotate=0;this._flip=!1;this._updatePoint=new BoundedPoint(new Point(this.Layout.X,this.Layout.Y),new Point(this.Layout.X,this.Layout.Y))}return n.prototype.Swim=function(){var n=(new Date).valueOf(),t,i,r;n>this._updateTime.Finish&&(this._updateTime.Finish=n+Math.random()*2e3+2e3,this._updateTime.Start=n,this._updateTime.Value=n,Math.random()<.2?(this._updatePoint.Start.X=this.Layout.X,this._updatePoint.Start.Y=this.Layout.Y,t=Math.random(),i=Math.random(),t=Math.min(Math.max(t,.07),.93),i=Math.min(Math.max(i,.07),.93),this._updatePoint.Finish.X=t*this.ctx.canvas.clientWidth,this._updatePoint.Finish.Y=i*this.ctx.canvas.clientHeight,this._updateZ.Start=this.Layout.Percentage,this._updateZ.Finish=Math.random(),this._updateZ.Value=this._updateZ.Start,this._rotate=.4,this._updatePoint.Direction===Direction.Right&&(this._flip=!0),this._updatePoint.Direction===Direction.Left&&(this._flip=!1),this._rotate=this._flip?this._rotate:-this._rotate):(this._updatePoint.Start.X=this.Layout.X,this._updatePoint.Start.Y=this.Layout.Y,this._updatePoint.Finish.X=this.Layout.X,this._updatePoint.Finish.Y=this.Layout.Y,this._updateZ.Start=this.Layout.Percentage,this._updateZ.Finish=this.Layout.Percentage,this._updateZ.Value=this._updateZ.Start,Math.random()<.5&&(this._flip=!this._flip),this._rotate=0));this._updateTime.Value=n;r=this._updateTime.Percentage;this._updateZ.Percentage=r;this.Layout.Percentage=this._updateZ.Value;this._updatePoint.Percentage=r;this.Layout.X=this._updatePoint.Value.X;this.Layout.Y=this._updatePoint.Value.Y;this.Draw()},n.prototype.Draw=function(){this.ctx.save();this.ctx.translate(this.Layout.X-this.Layout.Width.Value/2,this.Layout.Y-this.Layout.Height.Value/2);this.ctx.translate(this.Layout.Width.Value/2,this.Layout.Height.Value/2);this.ctx.rotate(this._rotate);this._flip&&this.ctx.scale(-1,1);this.ctx.drawImage(this.img,-(this.Layout.Width.Value/2),-(this.Layout.Height.Value/2),this.Layout.Width.Value,this.Layout.Height.Value);this.ctx.restore()},n}();$(document).ready(function(){var t=document.getElementById("cGame"),i=t.getContext("2d"),n=[],r,e,u,f;for(n.push("resources/BabyMermaid.png"),n.push("resources/BabyMermaid2.png"),n.push("resources/BabyMermaid3.png"),n.push("resources/BabyMermaid4.png"),n.push("resources/BoyfriendMermaid.png"),n.push("resources/DadMermaid.png"),n.push("resources/DadMermaid2.png"),n.push("resources/GirlfriendMermaid.png"),n.push("resources/GirlMermaid.png"),n.push("resources/GirlMermaid2.png"),n.push("resources/MomMermaid.png"),n.push("resources/MomMermaid2.png"),n.push("resources/WorkerMermaid.png"),n.push("resources/WorkerMermaid2.png"),n.push("resources/WorkerMermaid3.png"),r=[],e=function(){var f=new Image;f.onload=function(){var u=Math.random()*t.clientWidth,e=Math.random()*t.clientHeight,n=BoundedBox.WithAspectRatio(u,e,f.width,f.height,300,.3);n.Percentage=Math.random();r.push(new Swimmer(f,i,n))};f.src=n[u]},u=0;u<n.length;u++)e();f=function(){var u=i.createLinearGradient(0,0,0,i.canvas.clientHeight),e,n;for(u.addColorStop(0,"#a2c3f9"),u.addColorStop(1,"#4286f4"),i.fillStyle=u,i.fillRect(0,0,t.clientWidth,t.clientHeight),e=function(n,t){var i=n.Layout.Percentage-t.Layout.Percentage;return i===0&&(i=n.img.id<t.img.id?1:0),i},r.sort(function(n,t){return n.Layout.Percentage-t.Layout.Percentage}),n=0;n<r.length;n++)r[n].Swim();window.setTimeout(function(){return f()},10)};f()});